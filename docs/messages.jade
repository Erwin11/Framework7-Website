extends ../jade/_internal-template

block vars
  - var activeLink = 'docs';
  - var title = 'Messages | Framework7 Documentation';

block content
  .docs-demo-device
    iframe(width="320", height="548", frameborder="0", scrolling="on")
    .fade-overlay
  .docs-wrap
    .docs-nav
      include ../jade/_docs-menu
    .docs-content.with-device
      .full-width
        h1 消息
        p 消息组件会让App的消息系统更加丰富多彩
        h2 消息组件
        pre
          code
            | ...   
            | &lt;div class="page"&gt;
            |   &lt;div class="page-content messages-content"&gt;
            |     &lt;div class="messages"&gt;
            |       &lt;!-- Date stamp --&gt;
            |       &lt;div class="messages-date"&gt;Sunday, Feb 9 &lt;span&gt;12:58&lt;/span&gt;&lt;/div&gt;
            | 
            |       &lt;!-- Sent message (by default - green and on right side) --&gt;
            |       &lt;div class="message message-sent"&gt;
            |         &lt;!-- Bubble with text --&gt;
            |         &lt;div class="message-text"&gt;Hello&lt;/div&gt;
            |       &lt;/div&gt;
            | 
            |       &lt;!-- Another sent message --&gt;
            |       &lt;div class="message message-sent"&gt;
            |         &lt;!-- Bubble with text --&gt;
            |         &lt;div class="message-text"&gt;How are you?&lt;/div&gt;
            |       &lt;/div&gt;
            | 
            |       &lt;!-- Received message (by default - grey on left side) --&gt;
            |       &lt;div class="message message-received"&gt;
            |         &lt;!-- Sender name --&gt;
            |         &lt;div class="message-name"&gt;Kate&lt;/div&gt;
            | 
            |         &lt;!-- Bubble with text --&gt;
            |         &lt;div class="message-text"&gt;I am fine, thanks&lt;/div&gt;
            | 
            |         &lt;!-- Sender avatar --&gt;
            |         &lt;div style="background-image:url(http://lorempixel.com/output/people-q-c-100-100-9.jpg)" class="message-avatar"&gt;&lt;/div&gt;
            |       &lt;/div&gt;
            | 
            |       &lt;!-- Another date stamp --&gt;
            |       &lt;div class="messages-date"&gt;Sunday, Feb 3 &lt;span&gt;11:58&lt;/span&gt;&lt;/div&gt;
            | 
            |       &lt;!-- Sent message with image --&gt;
            |       &lt;div class="message message-sent"&gt;
            |         &lt;!-- Bubble with image --&gt;
            |         &lt;div class="message-text"&gt;&lt;img src="http://lorempixel.com/300/300/"&gt;&lt;/div&gt;
            |       &lt;/div&gt;
            |     &lt;/div&gt;
            |   &lt;/div&gt;
            | &lt;/div&gt;        
            | ...   
        p Where:
        ul
          li
            p <code>"messages-content"</code> - 用来包装消息，这个元素应该在"page-content"类内部
          li
            p <code>"messages"</code> - 用来包装消息气泡
          li
            p <code>"messages-date"</code> - 标识这条对话的时间
          li
            p <code>"message"</code> - 标识一条消息
          li
            p <code>"message-name"</code> - 发送人名称
          li
            p <code>"message-text"</code> - 文本气泡
          li
            p <code>"message-avatar"</code> - 发送人头像
          li
            p <code>"message-sent"</code> - 标识一条被用户发送过的消息，它会位于容器的右侧并且拥有绿色的背景
          li
            p <code>"message-received"</code> - 标识一条被用户接收的消息，它会位于容器的左侧并且拥有灰色的背景
          
          
        p JavaScript将自动的添加样式
        ul
          li
            p <code>"message-pic"</code> - 为单条带<img>的消息添加样式，该条消息不可以包括其他元素，除了image
          li
            p <code>"message-last"</code> - 如果这是一个发送者连续会话的最后一条，则带有一个小尾巴并且有更大的底部留白
          li
            p <code>"message-first"</code> - 如果这是一个发送者会话的第一条，则带有发送者的名称和头像
          li
            p <code>"message-with-avatar"</code> - 一条包含头像的单条信息
          
        .important-note
          p 默认的布局，新消息会出现在页面底部，但如果你需要让它出现在页面的顶部，那么你可以加入"new-messages-first"样式到 &lt;div class="messages"&gt;
        h2 消息 JavaScript API
        p 以下是我们可以使用的方法：
        .method-wrap
          p
            span.method myApp.addMessage(<span>parameters</span>) 
            span - 添加消息
          ul.method-parameters
            li
              span.parameter parameters
              |  - <span class="parameter-type">object</span> 消息参数，必选的

        .method-wrap
          p
            span.method myApp.updateMessagesAngles(<span>messagesContainer</span>) 
            span - 为需要的消息添加"message-last" 样式
          ul.method-parameters
            li
              span.parameter messagesContainer
              |  - <span class="parameter-type">HTMLElement</span> or <span class="parameter-type">string</span> (with CSS selector) - 消息容器 (&lt;div class="messages"&gt;). 必选的

        .method-wrap
          p
            span.method myApp.scrollMessagesContainer(<span>messagesContent</span>) 
            span - animated scroll "messages-content" to the last message
          ul.method-parameters
            li
              span.parameter messagesContent
              |  - <span class="parameter-type">HTMLElement</span> or <span class="parameter-type">string</span> (with CSS selector) - 消息内容 (&lt;div class="page-content messages-content"&gt;). 可选的
        p 来看一下相关的参数和方法：
        table.params-table
          thead
            tr
              th 参数
              th 类型
              th 默认
              th 说明
          tbody
            tr
              td text
              td string
              td
              td 消息文本，也可以使用HTML串，如果你下给你添加图片消息，则应该使用: <code>&lt;img src="..."&gt;</code>. <b>必选的</b>
            tr
              td name
              td string
              td
              td 发送者名称 <b>可选的</b>
            tr
              td avatar
              td string
              td
              td 发送者头像url <b>可选的</b>
            tr
              td type
              td string
              td 'sent'
              td 消息类型，’发送‘或者’接收‘ <b>Optional</b>
            tr
              td day
              td string
              td 
              td 日期，例如 - 'Today', 'Monday', 'Yesterday', 'Fri', '22.05.2014'. <b>Optional</b>
            tr
              td time
              td string
              td
              td 时间, 例如 - '22:45', '10:30 AM'. <b>Optional</b>
      h2(data-device-preview="../docs-demos/messages.html") Example
      pre
        code
          | &lt;div class="page toolbar-fixed"&gt;
          |   &lt;div class="page-content messages-content"&gt;
          |     &lt;div class="messages"&gt;
          |       &lt;div class="messages-date"&gt;Sunday, Feb 9 &lt;span&gt;12:58&lt;/span&gt;&lt;/div&gt;
          |       &lt;div class="message message-sent"&gt;
          |         &lt;div class="message-text"&gt;Hello&lt;/div&gt;
          |       &lt;/div&gt;
          |       &lt;div class="message message-sent"&gt;
          |         &lt;div class="message-text"&gt;How are you?&lt;/div&gt;
          |       &lt;/div&gt;
          |       &lt;div class="message message-received"&gt;
          |         &lt;div class="message-name"&gt;Kate&lt;/div&gt;
          |         &lt;div class="message-text"&gt;I am fine, thanks&lt;/div&gt;
          |         &lt;div style="background-image:url(http://lorempixel.com/output/people-q-c-100-100-9.jpg)" class="message-avatar"&gt;&lt;/div&gt;
          |       &lt;/div&gt;
          |       &lt;div class="messages-date"&gt;Sunday, Feb 3 &lt;span&gt;11:58&lt;/span&gt;&lt;/div&gt;
          |       &lt;div class="message message-sent"&gt;
          |         &lt;div class="message-text"&gt;Nice photo?&lt;/div&gt;
          |       &lt;/div&gt;
          |       &lt;div class="message message-sent message-pic"&gt;
          |         &lt;div class="message-text"&gt;&lt;img src="http://lorempixel.com/300/300/"&gt;&lt;/div&gt;
          |       &lt;/div&gt;
          |       &lt;div class="message message-received"&gt;
          |         &lt;div class="message-name"&gt;Kate&lt;/div&gt;
          |         &lt;div class="message-text"&gt;Wow, awesome!&lt;/div&gt;
          |         &lt;div style="background-image:url(http://lorempixel.com/output/people-q-c-100-100-9.jpg)" class="message-avatar"&gt;&lt;/div&gt;
          |       &lt;/div&gt;
          |     &lt;/div&gt;
          |   &lt;/div&gt;
          | &lt;/div&gt;
          
      pre
        code
          | var myApp = new Framework7();
          | 
          | var $$ = Dom7;
          | 
          | // Conversation flag
          | var conversationStarted = false;
          | 
          | // Handle message
          | $$('.messagebar .link').on('click', function () {
          |   var textarea = $$('.messagebar textarea');
          |   // Message text
          |   var messageText = textarea.val().trim();
          |   // Exit if empy message
          |   if (messageText.length === 0) return;
          | 
          |   // Empty textarea
          |   textarea.val('').trigger('change');
          | 
          |   // Random message type
          |   var messageType = (['sent', 'received'])[Math.round(Math.random())];
          | 
          |   // Avatar and name for received message
          |   var avatar, name;
          |   if(messageType === 'received') {
          |     avatar = 'http://lorempixel.com/output/people-q-c-100-100-9.jpg';
          |     name = 'Kate';
          |   }
          |   // Add message
          |   myApp.addMessage({
          |     // Message text
          |     text: messageText,
          |     // Random message type
          |     type: messageType,
          |     // Avatar and name:
          |     avatar: avatar,
          |     name: name,
          |     // Day
          |     day: !conversationStarted ? 'Today' : false,
          |     time: !conversationStarted ? (new Date()).getHours() + ':' + (new Date()).getMinutes() : false
          |   })
          | 
          |   // Update conversation flag
          |   conversationStarted = true;
          | });             